<!-- ═══════════════════════════════════════════════════════════════
     VIDEO CARD SECTION - Apple-Style Video Showcase
     ═══════════════════════════════════════════════════════════════
     Large rounded card with video, play/pause control
     ═══════════════════════════════════════════════════════════════ -->

<section class="bg-gray-900 py-16 md:py-20">
  <div class="container-puzh px-4">

    <!-- Section Header -->
    <div class="w-full max-w-6xl mx-auto mb-12">
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-left mb-4 text-white">
        {{ if eq .Language.Lang "de" }}PUZH.App bald.{{ else }}PUZH.App soon.{{ end }}
      </h2>
      <p class="text-2xl lg:text-3xl font-bold text-white/80">
        {{ if eq .Language.Lang "de" }}Zuerst im App Store für iPhone. Arbeiten am Launch.{{ else }}First on App Store for iPhone. Working hard on the launch.{{ end }}
      </p>
    </div>

    <!-- Video Card Container - Apple-Style -->
    <div class="relative w-full max-w-6xl mx-auto overflow-hidden bg-gradient-to-br from-blue-600 via-blue-500 to-cyan-400 shadow-2xl rounded-[24px] md:rounded-[32px]">

      <!-- Video Element - Responsive Height (iPhone optimized) -->
      <div class="relative w-full bg-black h-[500px] sm:h-[600px] md:h-[700px] lg:h-[800px]">
        <video
          id="promo-video"
          class="w-full h-full object-cover object-center"
          poster="/images/puzh-loop-poster.webp"
          preload="metadata"
          controls
          loop
          autoplay
          muted
          playsinline
        >
          <source src="/videos/puzh-loop.mp4" type="video/mp4">
          Dein Browser unterstützt das Video-Element nicht.
        </video>

        <!-- PUZH Logo Overlay - Centered at top of video -->
        <div data-video-logo style="position: absolute; top: 32px; left: 50%; transform: translateX(-50%); z-index: 9999; pointer-events: none;">
          <!-- VARIANT A: BLACK/WHITE -->
          <div data-logo-variant="variant-a" style="display: none;">
            <img src="/images/logo_puzh_black.svg" alt="PUZH" class="block dark:hidden" style="height: 100px; width: auto;">
            <img src="/images/logo_puzh_white.svg" alt="PUZH" class="hidden dark:block" style="height: 100px; width: auto;">
          </div>
          <!-- VARIANT B: BLUE/GREEN -->
          <div data-logo-variant="variant-b" style="display: none;">
            <img src="/images/logo_puzh_blue.svg" alt="PUZH" class="block dark:hidden" style="height: 100px; width: auto;">
            <img src="/images/logo_puzh_green.svg" alt="PUZH" class="hidden dark:block" style="height: 100px; width: auto;">
          </div>
          <!-- VARIANT C: GREEN/BLUE -->
          <div data-logo-variant="variant-c" style="display: none;">
            <img src="/images/logo_puzh_green.svg" alt="PUZH" class="block dark:hidden" style="height: 100px; width: auto;">
            <img src="/images/logo_puzh_blue.svg" alt="PUZH" class="hidden dark:block" style="height: 100px; width: auto;">
          </div>
        </div>

        <!-- Play/Pause Button Overlay -->
        <button
          id="video-play-btn"
          class="absolute top-4 right-4 w-12 h-12 md:w-14 md:h-14 flex items-center justify-center bg-white/10 backdrop-blur-md border border-white/20 rounded-full hover:bg-white/20 transition-all duration-300 z-10 group"
          aria-label="Video abspielen/pausieren"
        >
          <!-- Pause Icon (shown when playing) -->
          <svg id="pause-icon" class="w-6 h-6 md:w-7 md:h-7 text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <rect x="6" y="4" width="4" height="16" fill="currentColor"></rect>
            <rect x="14" y="4" width="4" height="16" fill="currentColor"></rect>
          </svg>
          <!-- Play Icon (shown when paused) -->
          <svg id="play-icon" class="w-6 h-6 md:w-7 md:h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
          </svg>
        </button>

        <!-- Click anywhere to toggle (optional) -->
        <div class="absolute inset-0 cursor-pointer z-5" id="video-overlay"></div>

        <!-- App Store Badge Overlay - Centered at bottom of video -->
        <div style="position: absolute; bottom: 32px; left: 50%; transform: translateX(-50%); z-index: 9999; pointer-events: auto;">
          <a href="https://apps.apple.com/app/puzh" target="_blank" rel="noopener noreferrer" style="display: block;">
            {{ if eq .Language.Lang "de" }}
            <img src="/images/app-store-badge-de.svg" alt="Vorbestellen im App Store" style="height: 50px; width: auto; display: block; max-width: none;">
            {{ else }}
            <img src="/images/app-store-badge-en.svg" alt="Pre-order on the App Store" style="height: 50px; width: auto; display: block; max-width: none;">
            {{ end }}
          </a>
        </div>
      </div>

    </div>

  </div>
</section>

<!-- Video Control Script -->
<script>
(function() {
  const video = document.getElementById('promo-video');
  const playBtn = document.getElementById('video-play-btn');
  const playIcon = document.getElementById('play-icon');
  const pauseIcon = document.getElementById('pause-icon');
  const overlay = document.getElementById('video-overlay');

  if (!video || !playBtn) return;

  function togglePlayPause() {
    if (video.paused) {
      video.play();
      playIcon.classList.add('hidden');
      pauseIcon.classList.remove('hidden');
    } else {
      video.pause();
      playIcon.classList.remove('hidden');
      pauseIcon.classList.add('hidden');
    }
  }

  // Button click
  playBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    togglePlayPause();
  });

  // Overlay click (anywhere on video)
  overlay.addEventListener('click', togglePlayPause);

  // Update button when video ends
  video.addEventListener('ended', () => {
    playIcon.classList.remove('hidden');
    pauseIcon.classList.add('hidden');
  });
})();

// Sync Video Logo with Hero Variant
(function() {
  setTimeout(() => {
    // Find which hero variant is visible
    const heroVariants = document.querySelectorAll('[data-hero-variant]');
    let activeVariant = 'variant-a'; // default

    heroVariants.forEach(variant => {
      if (variant.style.display !== 'none') {
        activeVariant = variant.getAttribute('data-hero-variant');
      }
    });

    // Show matching logo variant in video
    const videoLogoVariants = document.querySelectorAll('[data-video-logo] [data-logo-variant]');
    videoLogoVariants.forEach(logoVariant => {
      if (logoVariant.getAttribute('data-logo-variant') === activeVariant) {
        logoVariant.style.display = 'block';
      } else {
        logoVariant.style.display = 'none';
      }
    });

    console.log('Video logo synced with hero variant:', activeVariant);
  }, 100);
})();
</script>
